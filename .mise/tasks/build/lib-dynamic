#!/usr/bin/env bash
#MISE description="Build dynamic/shared library"
set -euo pipefail

#USAGE flag "--profile <mode>" help="Optimization profile (Debug, ReleaseSafe, ReleaseFast, ReleaseSmall)"
#USAGE flag "--target <triple>" help="Target platform (e.g., x86_64-linux-musl, aarch64-macos)"
#USAGE flag "--cpu <features>" help="CPU feature flags"

CMD="zig build lib-dynamic"

if [ -n "${usage_profile:-}" ]; then
  CMD="$CMD -Doptimize=$usage_profile"
fi

if [ -n "${usage_target:-}" ]; then
  CMD="$CMD -Dtarget=$usage_target"
fi

if [ -n "${usage_cpu:-}" ]; then
  CMD="$CMD -Dcpu=$usage_cpu"
fi

eval "$CMD"
